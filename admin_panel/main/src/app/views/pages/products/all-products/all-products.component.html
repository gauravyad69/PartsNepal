
<section class="padding-y">
    <div class="container">
        <header class="section-heading d-flex justify-content-between align-items-center mb-4">
            <h4 class="section-title">Product Management</h4>
            <div class="d-flex align-items-center gap-3">
                <div class="form-group">
                    <select class="form-select" [(ngModel)]="fliterValue">
                        <option value="Default">Default</option>
                        <option value="Low to High">Price: Low to High</option>
                        <option value="High to Low">Price: High to Low</option>
                        <option value="A to Z">A to Z</option>
                        <option value="Z to A">Z to A</option>
                    </select>
                </div>
                <div class="form-group">
                    <select class="form-select" [(ngModel)]="itemsPerPage" (change)="onItemsPerPageChange()">
                        <option value="10">10 per page</option>
                        <option value="20">20 per page</option>
                        <option value="50">50 per page</option>
                        <option value="100">100 per page</option>
                    </select>
                </div>
            </div>
        </header>

        <div class="row">
            @for (item of products; track item.basic.productId) {
                <div class="col-12 mb-4">
                    <app-product [product]="item"></app-product>
                </div>
            }
        </div>

        @if (Loading) {
            <div class="row">
                @for (item of [1,2,3,4,5]; track $index) {
                    <div class="col-12 mb-4">
                        <div class="d-flex align-items-center">
                            <ngx-skeleton-loader [theme]="{ 'border-radius': '8px', width: '200px', height: '200px' }">
                            </ngx-skeleton-loader>
                            <div class="ms-4 flex-grow-1">
                                <ngx-skeleton-loader [theme]="{ 'border-radius': '4px', height: '30px', width: '60%' }">
                                </ngx-skeleton-loader>
                                <ngx-skeleton-loader [theme]="{ 'border-radius': '4px', height: '24px', width: '40%' }">
                                </ngx-skeleton-loader>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }

        <div class="d-flex justify-content-between align-items-center mt-4">
            <div>
                Showing {{(currentPage - 1) * itemsPerPage + 1}} to {{Math.min(currentPage * itemsPerPage, totalItems)}} of {{totalItems}} items
            </div>
            <nav aria-label="Product navigation">
                <ul class="pagination">
                    <li class="page-item" [class.disabled]="currentPage === 1">
                        <a class="page-link" (click)="changePage(currentPage - 1)" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    @for (page of getPageNumbers(); track page) {
                        <li class="page-item" [class.active]="page === currentPage">
                            <a class="page-link" (click)="changePage(page)">{{page}}</a>
                        </li>
                    }
                    <li class="page-item" [class.disabled]="currentPage === totalPages">
                        <a class="page-link" (click)="changePage(currentPage + 1)" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</section>