<div class="product">
    <div class="product-container d-flex flex-column flex-md-row">
        <div class="product-image flex-shrink-0">
            <a [routerLink]="['/products', product?.basic?.productId ?? '']">
                <img [ngSrc]="product?.basic?.inventory?.mainImage ?? 'assets/images/ImageNotFound.png'"
                     [alt]="'Product image'"
                     width="300" height="200"
                     priority
                     (error)="onImageError($event)">
            </a>
        </div>
        <div class="product-content flex-grow-1 ms-0 ms-md-4 mt-3 mt-md-0">
            <table class="table table-sm product-details-table">
                <tbody>
                    <tr>
                        <td>
                            <small class="text-muted label">Product ID</small>
                            <div class="value">{{product.basic.productId}}</div>
                        </td>
                        <td>
                            <small class="text-muted label">SKU</small>
                            <div class="value">{{product.basic.productSKU}}</div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <small class="text-muted label">Category ID</small>
                            <div class="value">{{product.basic.categoryId}}</div>
                        </td>
                        <td>
                            <small class="text-muted label">Stock</small>
                            <div class="value">{{product.basic.inventory.stock}}</div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <small class="text-muted label">Regular Price</small>
                            <div class="value price">{{product.basic.pricing.regularPrice.amount | priceFormat | currency:'NPR'}}</div>
                        </td>
                        <td>
                            <small class="text-muted label">Sale Price</small>
                            <div class="value price">
                                @if (product.basic.pricing.salePrice?.amount) {
                                    {{product.basic.pricing.salePrice?.amount | priceFormat | currency:'NPR'}}
                                } @else {
                                    <span class="text-muted">Not on sale</span>
                                }
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <small class="text-muted label">Discount</small>
                            <div class="value">
                                @if (product.basic.pricing.discount) {
                                    @if (product.basic.pricing.discount.type === 'PERCENTAGE') {
                                        {{product.basic.pricing.discount.amount.amount}}%
                                    } @else {
                                        {{product.basic.pricing.discount.amount.amount | priceFormat | currency:'NPR'}}
                                    }
                                } @else {
                                    <span class="text-muted">No discount</span>
                                }
                            </div>
                        </td>
                        <td>
                            <small class="text-muted label">Rating</small>
                            <div class="value">{{product.details.features.reviews.summary?.averageRating ?? 0 | number:'1.1-1'}} / 5.0</div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <small class="text-muted label">Shipping Cost</small>
                            <div class="value price">{{product.details.delivery.shippingCost.amount | priceFormat | currency:product.details.delivery.shippingCost.currency}}</div>
                        </td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

            <div class="mt-2">
                <small class="text-muted">
                    <!-- Last Updated: {{product.lastUpdated | date:'medium'}} 
                    | Version: {{product.version}} -->
                </small>
            </div>
        </div>
    </div>
</div>
